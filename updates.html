// TODO: Replace with your Firebase config from Firebase Console
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID",
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Register user
document.getElementById("register-form").addEventListener("submit", (e) => {
  e.preventDefault();

  const email = document.getElementById("reg-email").value;
  const password = document.getElementById("reg-password").value;
  const role = document.getElementById("reg-role").value;
  const userClass = document.getElementById("reg-class").value;
  const gender = document.querySelector('input[name="gender"]:checked').value;

  auth.createUserWithEmailAndPassword(email, password)
    .then((userCredential) => {
      // Save extra user info in Firestore
      return db.collection("users").doc(userCredential.user.uid).set({
        email: email,
        role: role,
        class: userClass,
        gender: gender,
      });
    })
    .then(() => {
      alert("Registration successful! Please login.");
      document.getElementById("register-form").reset();
      window.location.href = "login.html"; // redirect after register
    })
    .catch((error) => {
      alert(error.message);
    });
});

// Login user
document.getElementById("login-form").addEventListener("submit", (e) => {
  e.preventDefault();

  const email = document.getElementById("login-email").value;
  const password = document.getElementById("login-password").value;

  auth.signInWithEmailAndPassword(email, password)
    .then(() => {
      alert("Login successful!");
      window.location.href = "index.html"; // redirect after login
    })
    .catch((error) => {
      alert(error.message);
    });
});
